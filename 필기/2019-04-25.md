#### 3일차 Azure Network 이해하기 위한 Network 기초



- IP Address

  - ip는 A컴퓨터가 목적지인 B컴퓨터를 찾기 위해서 필요하다.

  - v4(32bit=2^32=42억9천개) vs v6(128bit), 인터넷의 주소 체계
  
    - 실제로 IPv4, IPv6로 표현함.
  - 2^32=42억 9천개로 표현이 가능. 그러나 갯수 표현이 부족해서 v6가 새로 등장.
    - v4는 version4를 의미.

  - bit 설명

    1bit	 2^1=2

    ​			0

    ​			1

    2bit	 2^2=4

    ​			00

    ​			01

    ​			10

    ​			11

  - ###### 구성

    cf. A클래스는 네트워크 ID에서만 2개 빼주고 

    모든 클래스의 Host ID에서는 2를 빼줌.

    - A Class 0
  
      - A클래스 범위는 0으로 고정.6+
      - 00000000 00000000 00000000 00000000
      - 01111111 11111111 11111111 11111111
        - N.H.H.H   255.0.0.0(서브넷 마스크)
          - N은 Network ID
            - Network ID는 라우터까지 전송할 때
          - H는 Host ID
            - Host ID는 라우터 안에 각각의 컴퓨터를 찾아갈 때
        - Network 수 (2^7-2 = 126)
          - 2^7인 이유는 8비트에서 0은 고정이고, 나머지 7개만 고려하면 되기 때문. 
          - 2를 빼는 이유는 0과 127이 특별하기 때문에 빼야 하기 때문.
        - Host 수 (2^24 -2 = 16,777,214)
          - 2를 빼주는 이유 - 특별하게 사용하는 경우가 있기 때문
            - 세팅하지 않는 IP
              - Host ID의 모든 비트가 0일 때 
                - Network를 식별
              - Host ID의 모든 비트가 1일 때
                - Network에 BroadCast 데이터 전송시 사용
                - 목적지가 정해지지 않을 떄
        - 1.0.0.0
        - 126.255.255.255
          - 원래는 0.0.0.0 / 127.255.255.255이어야 하는데 0, 127은 특별하게 쓰임.
            - 0 : 네트워크 식별
            - 127 : loop back IP => local host
              - 자기 컴퓨터에서 테스트를 해보기 위함.
            - ![1556156139557](C:\Users\user\AppData\Roaming\Typora\typora-user-images\1556156139557.png)
              - 127.0.0.1은 IPv4
              - ::1은 IPv6
          - 개발자의 테스트 용도로 쓰임.
    - 32비트를 8비트씩 나눠서 넣음.
      - 하나의 8비트를 '옥텟' 이라고 함.
    - 32비트는 4개의 옥텟으로 표현
      - 1옥텟에서 표현할 수 있는 제일 큰 값은 255
        - 왜냐하면 11111111을 10진수로 변환하면 255가 됨.
  
    - B Class 10
  
      - 10000000 00000000 00000000 00000000  
      - 10111111 11111111 11111111 11111111
        - N.N.H.H  255.255.0.0(서브넷 마스크)
        - Network 수 (2^14 = 16,384)
        - 2^14인 이유는 첫 번째 옥텟에서 10은 고정되어 있기 때문.
        - Host 수 (2^16 - 2 = 65,534)
        - 2를 빼주는 이유 - A클래스와 같음.
        - 128.0.0.0
        - 191.255.255.255
  
    - C Class 110
  
      - 11000000 00000000 00000000 00000000
      - 11011111 11111111 11111111 11111111
        - N.N.N.H   255.255.255.0(써브넷 마스크)
      - Network 수 (2^21 = 2,097,152)
        - Host 수 (2^8 - 2 = 254)
        - 2를 빼주는 이유 - A클래스와 같음.
        - 192.0.0.0
      - 223.255.255.255
  
    => A,B,C는 목적지를 찾기 위한 용도
  
    ===================================
  
  - D Class 1110 => 멀티캐스트 데이터 전송(1: 그룹 통신)
  
    - 
  
  - E Class 1110 => 군사용 ip, 예약 ip로 사용
  
      
  
  - 데이터 전송 방식
  
    - 유니캐스트 
      - 1:1
        - 클라이언트 서버가 직접 1:1로 통신함.
      - 대부분 이용하는 방식
      - A, B, C Class에서 사용됨.
    - 멀티캐스트
      - 1:그룹
        - 하나의 데이터를 여러 명 동시에 보냄.
    - D Class에서 사용됨.
    - 브로드캐스트
    - 1:모든(라우터에서 필터)
        - 라우터는 하나의 데이터를 분리시켜줌.
    - 네트워크에 있는 모든 데이터에 데이터를 전송함.
  
- IP Address
  
  - Network ID (우편번호)
  
    - IANA -> ISP 
  
    - Network ID는 ISP(Internet Service Provider)에서 부여
  
      - ISP는 인터넷을 제공해주는 업체
  
        ex) SKT, LG, KT
  
    - 시,군,구,동
  
      - 네트워크를 식별

      - Network ID는 라우터까지 전송할 때

    - Host ID (번지)

      - 동의 번지
      - 네트워크 내의 시스템을 식별

      => 회사끼리는 라우터로 연결되어 있고, Network ID는 라우터까지 찾아감. 이후에 네트워크 내에 시스템을 식별하는 것이 Host ID
    
      - Host ID는 라우터 안에 각각의 컴퓨터를 찾아갈 때
  
  - Subnet Mask 

    - Network ID(네트워크)를 식별하기 위함.
    - Network ID는 첫 번째 비트부터 1이 들어가는 비트까지
    - 하나의 라우터 내에 네트워크들이 많이 있으면 문제가 생김
  - 장점 
      - 보안 이슈
    - 성능 이슈 
  
- Gateway IP
  
  - 라우터 장비에 부여되는 IP
    - 내부 네트워크와 외부 네트워크의 관문
      
  - 패킷이 외부로 나아가기 위해서는 반드시 게이트웨이 IP가 필요.
      
  - ![1556159949073](C:\Users\user\AppData\Roaming\Typora\typora-user-images\1556159949073.png)
  
    cf. (위와 아래는 예시가 다름)
  
  - 자신의 IP와 Subnet Mask를 AND 연산하여 **자신의 Network ID**를 식별하고
  
    목적지 IP와 자신의 Subnet Mask를 AND 연산하여 **목적지 Network ID**를 식별.
  
    두 Network ID가 동일 할 경우 Gateway 없이 통신하고 
  
    다를 경우 패킷을 Gateway에 전송 
      - ex) 		자신 IP		70.12.113.130

        ​	 		자신 Subnet 255.255.255.0

        AND 연산 => 70.12.113.0 (앞 세개가 네트워크 ID / 뒤 1개가 Host ID)

        

        같은 방법으로 목적지 Network ID 설계.

        두 Network ID가 동일할 경우, Gateway 없이 통신. 다를 경우 패킷을 Gateway에 전송

  - CIDR(Classless Inter-Domain Routing)

    - 사이더란 클래스가 없는 도메인 간 라우팅 기법으로 1993년 도입되기 시작한 , 최신의 IP 주소 할당 방법

    - Subnet Mask를 10진법으로 표기 하지 않고 2진법으로 표기

      - 왜냐하면 IP 낭비를 막기 위해서.

    - Class는 IP 낭비가 심함. 10진법으로 

      ex 1) 우리 회사는 50개의 IP가 필요합니다. 최적의 Subnet Mask는?
  
    ip/26  <== Subnet Mask 1 비트 수
  
    ​	cf. 26은 1이 26개가 있음. 즉, Subnet Mask가 26개를 포함.
  
    ​	cf. 26인 이유는 50개의 IP가 필요하기 때문에 적어도 64개는 가지고 있어야 한다. 따라서 뒤에 0이 6개를 가지고 있어야 함.
  
    => ip/255.255.255.192(192는 앞 두개가 11이고 뒤 6개가 0) 
  
    ​	cf. 255.255.255.0 으로 표기하면 ip 낭비가 심하기 때문에 이진법으로 표기함.
  
    => 11111111 11111111 11111111 11000000
  
    - 1들이 Network ID 이고 0들이 HostID.
        - 따라서 HostID는 2^6 - 2 = 62 

      ex 2) 우리 회사는 300개의 IP가 필요합니다. 최적의 Subnet Mask를 CIDR 표기법으로 표기.

      ip/23

      => ip/255.255.254.0

      => 11111111 11111111 11111110 00000000

      ex 3) 우리 회사는 2000개의 IP가 필요합니다. 최적의 Subnet Mask를 CIDR 표기법으로 표기.

      ip/21

      =>ip/255.255.248.0

      =>11111111 11111111 11111000 00000000

      ​	

  - Sub Network (Subnetting)

    - ISP에서 70.12.113.0/24 를 부여 받았다. 2개의(or 4개 ...) 네트워크를 분할 해서 사용.

      - 70.12.113은 Network ID  / 0이 Host ID
  
    - Network ID를 부여받고, 둘로 나눔.
  
      ex 1) 70.12.113.0/25 일 때 둘로 나눌 수 있음.
  
        cf. Network ID는 식별자 / Broadcast IP는 다 1일 때  / IP 범위는 Network ID 보다 크고, Broadcast IP보다 작다.

        - 70.12.113.00000000      <= 0000000(호스트 0 7개) 으로 표시하는 것은 식별을 위함임.

          - Network ID :  70.12.113.0

            cf. Network 수는 우리가 알 필요가 없음. Host 수만 우리가 기억하면 됨.
  
        - Broadcast IP : 70.12.113.01111111
            
      - or 70.12.113.127
            
      - Host 수 : 2^7-2 = 126
      
        - IP 범위 :  70.12.113.0/0000001 ~ 70.12.113.01111110
          
          - or 70.12.113.0/1~126
  
      - 70.12.113.10000000
  
        - Network ID : 70.12.113.128
      
          - 128이 네트워크 ID로 설정되었기 때문에 129부터 IP범위에 넣을 수 있음.
          
      - Broadcast IP : 70.12.113.11111111
            
      - or 70.12.113.255
            
      - Host 수 : 2^7-2 = 126
          
      - IP 범위 : 70.12.113.10000001 ~ 70.12.113.11111110
          
          - or 70.12.113.1/129~254
          
          cf. IP 가능 범위에서 1개는 라우터가 있어야 하기 때문에 1을 빼야 함을 알기!!!
      
        ex 2) 70.12.0.0/16을 부여받았다. 4개의 네트어크를 분할해서 사용.
      
          70.12.00000000.00000000 에서 시작
      
        - 70.12.00000000.00000000     <=  70.12.0.0/18
          - Network ID : 70.12.0.0
          - Broadcast IP : 70.12.00111111,11111111
            - or 70.12.63.255
          - Host 수: 2^14 -2 = 16,382
          - IP 범위 : 70.12.00000000.00000001 ~ 70.12.00111111.11111110
            - or 70.12.0.1 ~ 70.12.63.254
        - 70.12.01000000.00000000     <=  70.12.64.0/18
          - Network ID : 70.12.64.0
        - Broadcast IP : 70.12.01111111,11111111
            - or 70.12.127.255
        - Host 수: 2^14 -2 = 16,382
          - IP 범위 : 70.12.01000000.00000001 ~ 70.12.01111111.11111110
          - or 70.12.64.1 ~ 70.12.127.254
        - 70.12.10000000.00000000     <=  70.12.128.0/18
        - Network ID : 70.12.128.0
          - Broadcast IP :  70.12.10111111,11111111
          - or 70.12.191.255
          - Host 수: 2^14 -2 = 16,382
          - IP 범위 : 70.12.10000000.00000001 ~ 70.12.10111111.11111110
          - or 70.12.128.1 ~ 70.12.191.254
        - 70.12.11000000.00000000     <=  70.12.192.0/18
        - Network ID : 70.12.192.0
        - Broadcast IP : 70.12.11111111,11111111
          - or 70.12.255.255
        - Host 수: 2^14 -2 = 16,382
        - IP 범위 : 70.12.11000000.00000001 ~ 70.12.11111111.11111110
          - or 70.12.192.1 ~ 70.12.255.254
    
        - 단, 부여받은 IP를 임의로 바꿀 수는 없음!!!!!
    
      - 하나의 VNet을 만들고, VNet 밑에 Sub Network를 만듬.
    
      - 라우터에 세팅 되는 IP가 게이트웨이 IP

  - Public IP

    - 라우팅 되는 IP
  - 공인 IP
  
- Private  IP
  
  - 라우팅 되지 않는 IP
  
  - 비공인 IP
  
  - 인터넷 망에서 쓰는게 아니라 회사 내부에서 누구나 쓸 수 있도록 허용해 놓은 대역.
  
  - 보안
  
  - NAT (라우터로 내보내기 위해 사용)
  
    - Source IP ==> Public IP로 변환해서 인터넷 망으로 전달.
  
    - Source IP들이 패킷을 라우터에 보내면 라우터가 공인 IP로 변환해서 내보냄. 라우터로 들어온 패킷은 다시 사설 IP로 변환해서 들어옴.
  
        이렇게 변환 서비스를 'NAT' 라고 함.
  
    - 적은 공인 IP로 많은 인터넷으로 사용할 때
  
    A 10.0.0.0 ~ 10.255.255.255
  
      B 172.16.0.0 ~ 172.31.255.255

      C 192.168.0.0 ~ 192.168.255.255

  - Port

    - 데이터가 전송 되는 통로(0 ~ 65,536)
  
      - 잘 알려진 포트 : 0 ~ 1023
  
        - TCP
  
          - 신뢰성 있는 전송, 3way Handshake, 전송속도가 느리다.
            - 3번 물어보고, 3번 응답을 받음.
            - 전송 속도가 느리나 정확함.
  
        - UDP
  
          - 신뢰성 없는 전송, 전송속도가 빠르다.
            - 동영상 스트리밍.
  
          => 프로토콜끼리는 똑같아야 공유가 가능. TCP - TCP  / UDP - UDP
  
     C:\Windows\system32\drivers\etc\services 
  
    - TCP 21(포트) 
      - FTP(서비스)
    - TCP 22
      - SSH
    - 리눅스에서 SSH.
    - TCP 23
    - Telnet
    - TCP 25 
    - SMTP
    - TCP 53
    - DNS 영역전송
      - 1차 DNS에 있는 것을 2차 DNS로 복제.
  - UDP 53
      - DNS 이름 풀이
    - Host 이름 - FQDN => IP로 변환
    - UDP 67,68
    - DHCP
    - TCP 80
    - HTTP
    - TCP 1433
    - MS-SQL
    - TCP 3389
    - RDP
  
  - wf.msc(고급방화벽), firewall.cpl(기본 방화벽)
  
- Network
  
    ![1556177088063](C:\Users\user\AppData\Roaming\Typora\typora-user-images\1556177088063.png)

    - Hub

      - A -> B로갈 때 A에서 허브로 전달되면 허브는 연결된 모든 것에 전송함.

    - 스위치

      - A -> B로 갈 때 A에서 스위치로 전달되면 해당 B에만 데이터를 전송함.
  
    - Router
  
      ![1556177674572](C:\Users\user\AppData\Roaming\Typora\typora-user-images\1556177674572.png)
  
      - Router를 경유하며 Destination 까지 간다.
  
      ![1556177752152](C:\Users\user\AppData\Roaming\Typora\typora-user-images\1556177752152.png)
  
      - Router가 가는 경로를 추적함.
        - tracert

  - OSI 7 계층

    - 프로토콜을 개발하는 하나의 표준

    ![1556177969034](C:\Users\user\AppData\Roaming\Typora\typora-user-images\1556177969034.png)

    - 시스템 문제가 발생시, 어느 계층에서 문제가 생겼는지 발견해야 함.
    - physical - 케이블
      - Data Link - 램카드
      - Network
    - Transport
      - Session
    - Presentation
      - Aplication
  
    
  
  - Encapsulation / De-Encapsulation
  
    Encapsulation
  
    - 데이터를 하위 데이터로 내려 보낼 때 잘게 조개서 네트워크에서 통신할 수 있는 데이터 포맷으로 바꾸는 것.
  
      ![1556178166208](C:\Users\user\AppData\Roaming\Typora\typora-user-images\1556178166208.png)
  
      De-Encapsulation
  
      - De-Encapsulation
        - 다시 합침.
  
    - ![1556178648243](C:\Users\user\AppData\Roaming\Typora\typora-user-images\1556178648243.png)ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ밑에는 동욱이형 필기ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ
  
  
    
  
  - ### NAT
  
    패킷의 Source IP ==> Public IP로 변환해서 인터넷 망으로 전달
  
    Port: 데이터가 전송 되는 통로(0 ~ 65536)
  
    잘 알려진 포트: 0 ~ 1023
  
    - TCP: 신뢰성 있는 전송, 3way Handshake, 전송속도가 느리다.
  
    handshake에서 못 받았다면, 새로 데이터를 보내준다. 전송속도가 느리다.
  
    - UDP: 신뢰성 없는 전송, 전송속도가 빠르다.
  
    잘 받았는지 확인 작업이 없음.
  
    ``
  
    wellknown port가 기록되어 있는 경로(기억하기): `C:\Windows\system32\drivers\etc\services`
  
    well known port는 IANA에서 정의해 놨음.
  
    (여기서 한 문제 나옴)
  
    - TCP 21: FTP
    - TCP 22: SSH
    - TCP 23: TELNET
    - TCP 25: SMTP(Q. SMTP와 POP3 프로토콜의 차이점?)
    - TCP 53: DNS 영역전송(Q. DNS 영역 전송? A. DNS 데이터베이스를 영역이라고 함. 1차 DNS가 있고 2차 DNS가 있음. 1차 DNS가 fail나면 2차 DNS가 작동함. 1차 DNS의 데이터베이스 파일을 2차 DNS의 데이터베이스로 복제 구성을 하게 됨. 즉, 1차 DNS 데이터베이스에서 2차 DNS 데이터베이스로 복제를 하는 것. zone을 복제함)
    - UDP 53: DNS 이름(FQDN;전체 컴퓨터 이름)풀이
    - UDP 67, 68: DHCP(67: 부트스트랩 프로토콜 서버, 68: 부트스트랩 프로토콜 클라이언트)
    - TCP 80: HTTP
    - TCP 1433: MS-SQL
    - TCP 3389: RDP
  
    포트 정보를 알아야 방화벽을 열어줄 수 있음
  
    TCP 445번 포트는 SMB 서비스
  
    ``파일 및 프린터 공유``는 ``139``번 및 ``445``번 포트를 씀.
  
    클라이언트는 다이나믹 IP를 씀(Q. 다이나믹 포트는 몇 번 부터 몇번 까지, 어떤 규칙으로 할당 되나요? )
  
    ``wf.msc(고급 방화벽), firewall.cpl(기본 박화벽)``
  
    방화벽 컨트롤은 Inbound 컨트롤임. 들어오는 것만 패킷을 차단한다든지 컨트롤함.
  
    시스템 및 보안 > windows Defender 방화벽 > 허용되는 앱
  
    cisco는 네트워크 장비를 팔고 HP는 서버 장비를 팔았음. 둘이 짝짝꿍이 잘 맞아서 둘이서 협업해서 판매를 많이 했음
  
    CISCO가 서버를 만들어서 팔기 시작하면서 갈라지고 싸우기 시작 했음. 
  
    CISCO가 지금은 클라우드를 하겠다고 함. oracle, HP도 클라우드 하겠다고 함.
  
    ## What is Network?
  
    네트워크는 연결임.
  
    네트워크는 좁은 의미에서는 LAN을 의미.
  
    네트워크는 넓은 의미로는 컴퓨터와 컴퓨터의 연결을 의미하는 것임
  
    ### P2P방식
  
    10대 미만의 computer일 때 자신이 클라이언트가 될 수도 있고 서버가 될 수도 있을 때.(소규모)
  
    ### Client/server
  
    100 ~ 1000대 서로서로 공유하는 것 보다는 서버를 두고 서버에 접속해서 서비스를 제공 받는 것.
  
    네트워크에 있는 컴퓨터들이 통신하기 위해서는 동일한 프로토콜이 설치되어 있어야 함.
  
    TCP, UDP, ISPX도 있음.
  
    ### Switch 장비
  
    컴퓨터와 컴퓨터 사이에 공유기 처럼 물려 있음.
  
    요즘엔 허브를 거의 안쓰고, 스위치를 씀.
  
    - 허브: 허브에 물려있는 모든 컴퓨터에 데이터를 뿌림. B 컴퓨터만 자신의 컴퓨터이기 때문에 mac address로 식별해서 상단으로 올림. 다른 컴퓨터는 자신의 mac address와 일치하지 않기 때문에 packet을 drop함.(Q. 허브의 통신 프로토콜은 무엇인가요?)
    - 스위치: 스위치는 네트워크에 물려 있는 정보들을 gathering 함. 따라서 포트에서 컴퓨터의 mac address가 어디에 있는지 알고 있음. 따라서 해당 주소의 컴퓨터에게만 정보를 보내줌.(Q. 스위치의 통신 프로토콜은 어떤 것인가요?)
  
    요즘에는 허브를 쓰는 업체는 없음. 네트워크 장치가 가격이 매우 낮기 때문에, 허브는 거의 생산되지 않음.
  
    ![](C:/Users/user/Downloads/img/3.png)
  
    라우터 IP는 첫 번째 IP로 세팅됨. 서브넷 마스크를 어떻게 하는지에 따라서 규모를 크게 할 수도 있고 작게 할 수도 있음.
  
    라우터에 세팅되는 IP는 회사의 관리자가 세팅하는 것임. 1번을 쓸지 254번을 쓸지 아니면 임의의 IP를 쓸지.
  
    흔하게 쓰는 것은 1번 또는 254임.
  
    이 router장비는 다른 회사 라우터 장비와 연결되어 있음. 그리고 또 다른 회사와 연결되어있고.
  
    그 회사는 스위치로 해서 컴퓨터들과 연결되어 있음.
  
    전 세계 인터넷 망이 위의 그림과 같은 형식으로 되어 있음.
  
    회사 네트워크를 private망 또는 on-premise망 이라고 함.
  
    일반적으로 회사 네트워크는 공인 ip가 아닌 사설 ip로 세팅을 함
  
    라우터들은 라우터와 통신을 하면서 네트워크id를 가지고 목적지network를 찾음
  
    그 안에서 host id를 가지고 호스트를 식별함.
  
    명령어: ``tracert www.google.com`` -> 어떤 경로를 경유해서 가는지. 방화벽에서 막혀있으면 출력이 안됨.
  
    ### OS 7 Layer
  
    ![](C:/Users/user/Downloads/img/4.png)
  
    애플은 애플 톡이라는 프로토콜을 쓰고, 노벨이라는 회사는 IPX/SPX라는 프로토콜을 쓰고, 또 다른 회사는 또 다른 프로토콜을 씀.
  
    프로토콜이 다르면 통신이 안됨.
  
    초창기에 벤더 끼리의 통신은 불가능 했음.
  
    `OSI 7계층`은 `이런 프로토콜을 가지고 통신을 해라 `라는 표준이다.
  
    각 계층을 밑에서(물리 계층) 부터 L1(layer 1), L2, L3, ..으로 부른다.
  
    문제가 발생한다면 어느 레이어에서 발생 했는지 찾아야 합니다.
  
    데이터링크는 랜카드
  
    3계층은 라우터
  
    ### Encapsulation / De-Encapsulation
  
    A라는 컴퓨터에서 B라는 컴퓨터로 데이터를 보냄.
  
    어플리케이션이나 네트워크를 통해서 보내려고 합니다.
  
    그 밑 레이어로 내려 보내면서 프레젠테이션에서는 압축하고 암호화 하고 그런 작업을 합니다.(프레젠테이션 레이어)
  
    세션 레이어에서는 연결 설정을 합니다.
  
    transport 레이어에서는 데이터를 잘게 쪼갭니다. 그리고 번호를 붙입니다.
  
    그 밑으로 데이터를 내려 보내면서 하나의 데이터에 네트워크에 대한 정보를 붙입니다.
  
    검출 코드를 넣게 되고 헤더를 더 추가합니다.
  
    그리고 랜 카드로 보내게 되는데, 디지털 신호를 전기 신호로 보내게 됩니다.
  
    랜 카드는 데이터 신호를 전기 신호로 바꾸게 됩니다. (케이블이 인식하는)
  
    그리고 HBA카드라는 것이 있는데, 일반 케이블이 아니라 광케이블이 있습니다.
  
    이 HBA카드는 컴퓨터 신호를 광신호로 바꿔줍니다. 따라서 광케이블이 깔려있으면, HBA카드를 사용해야 합니다.
  
    디지털 신호를 광신호로.
  
    그리고 B컴퓨터 에서는 전기 신호를 데이터 신호로 변환합니다.
  
    그리고 다시 위에 올려주는데 헤더들을 하나씩 제거합니다. 그리고 정보가 맞으면 헤더를 제거합니다.
  
    그리고 transport 계층에서 데이터들을 재조립합니다.
  
    이러한 위의 일련의 과정들을 `Encapsulation`이라고 합니다.
  
    `한 덩어리의 데이터를 잘게 쪼개서 네트워크로 보낸다.`
  
    반대로 De-encapsulation은 잘게 쪼개진 데이터를 합쳐서 받는 과정입니다.
  
    이 패킷을 레이어마다 부르는 이름이 다름.
  
    어플리케이션과 프레젠테이션, 세션 레이어에서는 데이터라고 부릅니다.
  
    트랜스포트 계층에서는 세그먼트라고 부르고
  
    네트워크 레이어에서는 패킷이라고 부릅니다.
  
    데이터 링크 계층에서는 프레임이라고 부릅니다.
  
    피지컬 레이어에서는 비트라고 부릅니다.
  
    bit는 전기신호입니다.
  
    다 동일한 용어이지만, 어느 레이어에서 보느냐에 따라서 이름을 좀 달리합니다.
  
    ### OSI Model and Network Devices
  
    ![](C:/Users/user/Downloads/img/5.png)
  
    - 라우터는 L3장비
    - 스위치는 L2 스위치가 있고, L4 스위치가 있음( L4 스위치가 좀 더 기능이 많음. L4 스위치는 방화벽 기능도 있음, 스위치는 L2 장비라고 하셨음)
  
    ## VPN
  
    인터넷 망을 통해 외부 네트워크에서 회사망을 접속
  
    ###### 터널링 프로토콜
  
    - PPTP: 보안이 취약함. 아래로 내려갈 수록(IKEv2로 갈수록 보안성이 더 좋음. 요즘에는 PPTP를 거의 안 씁니다.) 
    - L2TP: IPsec(암호화 시켜주는 도구)과 함께 써야함.
    - SSTP: TCP 443번 포트 하나만 열어주면 됨. ssh를 사용함 ====> 가장 많이 사용함
    - IKEv2: 이게 가장 새로나운 기술인데, 요즘 모바일을 많이 써서 모바일 장비를 통해서 무선으로 회사망에 접속을 할 수 있음. 기차에서 무선에서 다른 무선망으로 접속될 때, 세션이 끊긴다면 새로 접속해야 함. 그러나 IKEv2는 접속이 끊길 때 서버에서 클라이언트로 세션을 새로 맺음. 따라서 사용자들이 새로 로그온 안해도 됨. 
  
    PPTP와 L2TP는 보안에 관한 이슈가 있어서 방화벽을 열어줘야함.
  
    무선으로 데이터를 보내는 것은 AP라고 함.
  
    회사 망이 있습니다. 회사에 서버들이 있습니다. 이 서버들이 여러 서버가 있어요. 이 서버들은
  
    전부 사설 IP로 세팅되어 있습니다. 서버들도 private ip도 되어 있습니다.
  
    10.10.0.0/16비트라고 가정하면
  
    10.10이 네트워크 아이디고 0.0이 호스트ip입니다.
  
    노트북을 가지고 출장을 외부로 갔습니다. 그런데, 회사는 프라이빗 망이기 때문에 사설 IP로 되어있습니다.
  
    외부로 출장 나간경우에는 접속을 못합니다.
  
    VPN이라는 기술을 통하면 회사 내부에 접속 가능합니다.
  
    VPN서버가 회사 망에 있습니다. 이 서버는 공인ip와 사설ip를 둘 다 가지고 있습니다.
  
    이 원격에 있는 컴퓨터가 마치 회사 내부에 있는 것처럼 해 줍니다.
  
    이 것을 터널링 프로토콜이라고 합니다.
  
    사용자가 VPN 서버를 통해서 회사망에 접근하게 되면 터널링이 만들어져서, 회사 망에 있는 IP가 부여됩니다.
  
    VPN은 인터넷망을 이용해서 회사의private망에 있는 것처럼 만들어 주는것. 따라서 회사의 서버들에 접속 가능하게 됨.
  
    회사 대 회사도 터널링을 만들 수 있음.
  
    VPN은 라우터와 라우터 사이에서 VPN을 만들어 줄 수 있음. 이렇게 하면 마치 하나의 단일 네트워크처럼 사용 할 수 있음(ex. 본사와 지사의 라우터끼리 VPN 설정)
  
    ## DNS
  
    module 10741이라는 과정에서 모듈 4에 있는 내용임.
  
    `FQDN(fully qualified domain name; 전체 컴퓨터 이름)`
  
    Adaptum은 여러분의 회사입니다.
  
    AcctDirPC < 이것은 호스트 id, adaptum.com 여기까지가 네트워크 id
  
    ip구조와 도메인 구조는 반대로 되어 있음.(ip와 host 부분이 반대로 되어 있음)
  
    `A레코드, MX레코드` 언급됨
  
    DNS서버
  
    168.126.63.1, 2는 KT dns 서버 ip입니다.
  
    dns 서비스는 이름 > ip로 변환하는 서비스입니다.
  
    ping www.google.com
  
    `ipconfig /displaydns`(dns 캐쉬에 있는 내용을 출력함) (ipconfig /flushdns)
  
    위의 명령어를 치면 www.google.com이 TTL: 187, 레코드(172.217.27.68)
  
    이름 풀이를 하면 우리 캐시를 먼저 확인해봄.
  
    캐시가 우선수위가 제일 높음.
  
    그 다음에 캐쉬가 없으면, DNS 서버에게 물어봄. 그리고 걔가 
  
    시간이 지나면 캐시가 날라감
  
    TTL만큼 시간에 있음(TTL 73: 73초 동안 내 컴퓨터의 메모리에 있음)
  
    클라이언트가 영문 이름으로 접속함.
  
    그걸 변환시켜주는 것이 TCP/IP에 셋팅된 DNS 서버에 요청하는 것임
  
    [도메인을 만드는 사이트](http://www.internic.org)
  
    도메인을 신청을 해야함. 누구나 만들 수 있고, 영문으로 된 dns를 사용할 수 있음
  
    internic.net > register > Listing by Location of Registrar
  
    여기에서 IANA에 등록된 사이트들을 볼 수 있음(ex. 도레지, 가비아 등 볼 수 있음)